var t=new class t{#t="info";static#e=["debug","log","info","warn","error"];get level(){return this.#t}set level(e){let i;if(!(e=(e&&e.trim()||"").toLowerCase()))throw Error(`[FlickrCoverflow.Logger] - set level - level argument must be provided. actual: "${e}"`);if(i=t.#e.indexOf(e),i<0)throw Error(`[FlickrCoverflow.Logger] - set level - "${e}" log level is not supported`);if(this.#t=e,i>0)for(let e of t.#e.slice(0,i))this[e]=t.#i;for(let e of t.#e.slice(i))this[e]=this.#s.bind(this,e);this.info(`[FlickrCoverflow.Logger] - set level - Level has been set to "${e}"`)}constructor(){for(let e of t.#e)this[e]=t.#i}static#i(){}#s(t,...e){t in console||(t="log"),console[t](...e)}};class e{#r={small:{minHeight:102},medium:{minHeight:202},large:{minHeight:302}};#a;#n;#o;#h;get containerId(){return this.#a}get size(){return this.#n}get container2DSheet(){return`.${this.#o}{display:block;height:100%;min-height:${this.#r[this.#n].minHeight}px;position:relative;width:100%;}`}get frame2DSheet(){return`.${this.#o}-frame{pointer-events:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;height:100%;left:0;margin-left:33.5%;margin-right:33.5%;position:absolute;top:0;width:33%;}.${this.#o}-frame[data-template]{display:none;}.${this.#o}--visible[data-${this.#o}-index='0']{-webkit-transform:translateX(-101.25%);transform:translateX(-101.25%);}.${this.#o}--visible[data-${this.#o}-index='1']{-webkit-transform:translateX(-66%);transform:translateX(-66%);}.${this.#o}--visible[data-${this.#o}-index='2']{-webkit-transform:translateX(-33%);transform:translateX(-33%);}.${this.#o}--visible[data-${this.#o}-index='3']{-webkit-transform:translateX(0);transform:translateX(0);z-index:3;}.${this.#o}--visible[data-${this.#o}-index='4']{-webkit-transform:translateX(33%);transform:translateX(33%);z-index:2;}.${this.#o}--visible[data-${this.#o}-index='5']{-webkit-transform:translateX(66%);transform:translateX(66%);z-index:1;}.${this.#o}--visible[data-${this.#o}-index='6']{-webkit-transform:translateX(101.25%);transform:translateX(101.25%);}.${this.#o}--before{-webkit-transform:translateX(-101.25%);transform:translateX(-101.25%);}.${this.#o}--after{-webkit-transform:translateX(101.25%);transform:translateX(101.25%);}.${this.#o}-inner-frame{align-content:center;align-items:center;display:flex;flex-direction:column;height:100%;justify-content:flex-end;}.${this.#o}-image{flex:0 1 auto;max-height:100%;max-width:100%;vertical-align:middle;}.${this.#o}-title{bottom:0;font-family:Helvetica;left:0;position:absolute;text-align:center;width:100%;}.${this.#o}-frame:not(.${this.#o}--visible){opacity:0;visibility:hidden;}.${this.#o}--visible{display:block;opacity:1;visibility:visible;}.${this.#o}-image{pointer-events:auto;}`}constructor({containerId:t,size:e,prefix:i}){this.#a=t,this.#n=e,this.#o=i,this.#h=`$IDs .${this.#o}--visible[data-${this.#o}-index='0']{-webkit-transform:translateX(-101.25%) rotateY(45deg);transform:translateX(-101.25%) rotateY(45deg);}$IDs .${this.#o}--visible[data-${this.#o}-index='1']{-webkit-transform:translateX(-66%) rotateY(45deg);transform:translateX(-66%) rotateY(45deg);}$IDs .${this.#o}--visible[data-${this.#o}-index='2']{-webkit-transform:translateX(-33%) rotateY(45deg);transform:translateX(-33%) rotateY(45deg);}$IDs .${this.#o}--visible[data-${this.#o}-index='3']{-webkit-transform:translateX(0) rotateY(0);transform:translateX(0) rotateY(0);}$IDs .${this.#o}--visible[data-${this.#o}-index='4']{-webkit-transform:translateX(33%) rotateY(-45deg);transform:translateX(33%) rotateY(-45deg);}$IDs .${this.#o}--visible[data-${this.#o}-index='5']{-webkit-transform:translateX(66%) rotateY(-45deg);transform:translateX(66%) rotateY(-45deg);}$IDs .${this.#o}--visible[data-${this.#o}-index='6']{-webkit-transform:translateX(101.25%) rotateY(-45deg);transform:translateX(101.25%) rotateY(-45deg);}$IDs [data-${this.#o}-index='0'],$IDs [data-${this.#o}-index='1'],$IDs [data-${this.#o}-index='2'],$IDs .${this.#o}--before{-webkit-transform-origin:left center;transform-origin:left center;}$IDs [data-${this.#o}-index='4'],$IDs [data-${this.#o}-index='5'],$IDs [data-${this.#o}-index='6'],$IDs .${this.#o}--after{-webkit-transform-origin:right center;transform-origin:right center;}$IDs .${this.#o}--before{-webkit-transform:translateX(-101.25%) rotateY(45deg);transform:translateX(-101.25%) rotateY(45deg);}$IDs .${this.#o}--after{-webkit-transform:translateX(101.25%) rotateY(-45deg);transform:translateX(101.25%) rotateY(-45deg);}`}getContainer3DSheet(...t){return`#${t.join(",#")}{-webkit-transform-style:preserve-3d;perspective:1000px;transform-style:preserve-3d;}`}getFrame3DSheet(...t){return this.#h.replace(/\$IDs ([^,\{]+)/g,this.#l.bind(Object.create(null),t))}#l(t,e,i){return t.map(t=>`#${t} ${i}`).join(",")}}class i{#d;#f;#o;get config(){return this.#d&&{containerId:this.#d.containerId,size:this.#d.size,"3d":this.#f}}constructor({containerId:t,size:i="small","3d":s=!1,prefix:r}){if(!t)throw Error("containerId is required");this.#d=new e({containerId:t,size:i,prefix:r}),this.#f=s,this.#o=r}insertSheets(){if(!this.#d.containerId)throw Error("containerId must be configured first");this.#c();const t="container-ids";let e,i,s,r,a=this.#d.containerId,n=this.#o,o=`${n}-2D`,h=`${n}-sheet-2D`,l=`${n}-3D`,d=`${n}-sheet-3D`;if((e=document.getElementById(o))||(e=this.#m(o,this.#d.container2DSheet)),(i=document.getElementById(h))||(i=this.#m(h,this.#d.frame2DSheet,e)),this.#f){if(s=document.getElementById(l)){let e,i=s.getAttribute(t).split(",");i.push(a),e=window.btoa(this.#d.getContainer3DSheet(...i)),s.href=`data:text/css;base64,${e}`,s.setAttribute(t,i.join(","))}else s=this.#m(l,this.#d.getContainer3DSheet(a),i),s.setAttribute(t,a);if(r=document.getElementById(d)){let e,i=r.getAttribute(t).split(",");i.push(a),e=window.btoa(this.#d.getFrame3DSheet(...i)),r.href=`data:text/css;base64,${e}`,r.setAttribute(t,i.join(","))}else r=this.#m(d,this.#d.getFrame3DSheet(a),s),r.setAttribute(t,a)}}#c(){document.getElementById(this.#d.containerId).classList.add(this.#o)}#m(e,i,s){let r,a=document.createElement("link");return a.id=e,a.rel="stylesheet",r=window.btoa(i),a.href=`data:text/css;base64,${r}`,t.debug(`[flickr-coverflow/Style] - insertSheet - ${e}:`,i),s?s.insertAdjacentElement("afterend",a):document.head.insertAdjacentElement("afterbegin",a),a}}const s=Object.freeze(Object.create(null));class r{#u;register(t){"function"==typeof t&&(null!=this.#u?this.#u:this.#u=[]).push(t)}unregister(t){if(this.#u){let e=this.#u.indexOf(t);if(e>=0)return this.#u.splice(e,1)}}clear(){this.#u=void 0}send(t){if(this.#u)for(let e of this.#u.slice())e.call(s,t)}}class a{#p;#g;constructor(t="[Validator]",e="check"){this.#p=t,this.#g=e}method(t){return this.#g=t,this}checkDefined(t){let e=Object.keys(t)[0];if(null==t[e])throw Error(`${this.#p} - ${this.#g} - parameter ${e} is required`)}checkNumber(t,e){let i=Object.keys(t)[0],s=t[i];if(e){if(e.indexOf(s)<0)throw Error(`${this.#p} - ${this.#g} - parameter ${i} must be one of ${e}. Actual: ${s}`)}else if("number"!=typeof s)throw Error(`${this.#p} - ${this.#g} - parameter ${i} is required and must be a number. Actual: ${s}`)}checkString(t,e){let i=Object.keys(t)[0],s=t[i];if(e){if(e.indexOf(s)<0)throw Error(`${this.#p} - ${this.#g} - parameter ${i} must be one of ${e}. Actual: ${s}`)}else if("string"!=typeof s||!s.trim())throw Error(`${this.#p} - ${this.#g} - parameter ${i} is required and must be a non-empty string. Actual: ${s}`)}}const n=["url_w","url_n","url_m"],o=["url_b","url_c","url_z",...n];function h(t){const e=n.find(e=>t[e]);return t[e]}function l(t){const e=o.find(e=>t[e]);return t[e]}function d(t){return t.description?._content}class f{static#x="[flickr-coverflow/Coverflow]";static#b="data:image/png;base64,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";static get PAGE_SIZE(){return 7}static get logLevel(){return t.level}static set logLevel(e){t.level=e,t.info("%cFlickr Coverflow 2.1.1","font-size:80%;padding:0.2em 0.5em;color:#FFFFD5;background-color:#FF0066;")}static get#C(){return"ontouchstart"in window}#f=!1;#n="small";#S=0;#v=0;#w=0;#A=[];#D=!1;#I=Number.NEGATIVE_INFINITY;#E;#F;#X;#T;#o;#y;#L;#k;#z;#P;#B;#j={init:new r,load:new r,zoom:new r,previous:new r,next:new r};get#N(){return!this.#A[this.#w+7]}get#V(){return this.#A[this.#w+7-3]}get#U(){return this.#Q[this.#w+7]}get#Q(){return Array.from(this.#E.querySelectorAll(`.${this.#B}:not([data-template])`))}get#J(){return Array.from(this.#E.querySelectorAll(`.${this.#L}`))}get#R(){return this.#J[3]}get#M(){return this.#J[4]}get#O(){return this.#w%7==0}constructor({dataSource:e,container:i,size:s="medium","3d":r=!1,prefix:n="flickrCoverflow"}={}){t.log(`${f.#x} - constructor`),t.debug(`${f.#x} - constructor -`,{size:s,d3:r});const o=new a(f.#x).method("constructor");if(o.checkDefined({dataSource:e}),o.checkString({size:s},["small","medium","large"]),o.checkString({prefix:n}),!(i&&i instanceof window.HTMLElement))throw Error(`${f.#x} - constructor - parameter container is required and must be an HTMLElement. Actual: ${i}`);if(!i.id||document.querySelectorAll(`#${i.id}`).length>1)throw Error(`${f.#x} - constructor - parameter container must have a unique id. Actual: ${i.id}`);if(i.classList.contains(this.#o))t.warn(`${f.#x} - constructor - #${i.id} is already a coverflow`);else{if(7!==e.pageSize)throw new Error(`mismatch between ${f.name}.pageSize (7) and ${e.constructor.name}.pageSize (${e.pageSize})`);this.#o=n,this.#E=i,this.#f=r,this.#n=s,this.#F=e,this.#y=`data-${this.#o}-index`,this.#L=this.#o+"--visible",this.#k=this.#o+"--first-visible",this.#z=this.#o+"--median-visible",this.#P=this.#o+"--last-visible",this.#B=this.#o+"-frame",this.#H()}}#H(){for(let t of Object.keys(this.#j)){let e=`on${t[0].toUpperCase()}${t.substring(1)}`;this[e]||(this[e]=function(e){return this.#j[t].register(e),{off:()=>this.#j[t].unregister(e)}})}}#W(){let t=this.#X=document.createElement("div");t.classList.add(this.#B),t.setAttribute("data-template","yes"),t.innerHTML=`<div class="${this.#o}-inner-frame">\n\t\t\t\t<img class="${this.#o}-image" src="${f.#b}" />\n\t\t\t\t<div class="${this.#o}-title"><span>No title</span></div>\n\t\t\t</div>`}#Z(){let t=this.#X.cloneNode(!0);return t.style.display="none",t.removeAttribute("data-template"),t.setAttribute("data-ghost-frame",""),this.#E.appendChild(t),t}#K(e){let i=this.#X.cloneNode(!0),s=i.querySelector(`img.${this.#o}-image`),r=this.#Y(e),a=i.querySelector(`.${this.#o}-title span`);return s.setAttribute("data-id",e.id),s.setAttribute("data-zoom-url",e.zoom),s.setAttribute("alt",e.title),e.description&&s.setAttribute("data-description",e.description),s.style.backgroundImage=`url(${f.#b})`,a.textContent=e.title,s.addEventListener("error",function e(i){t.error(`${f.#x} - #insertFrame - fail to load        image "${r}" due to error ${i}`),s.removeEventListener("error",e),s.setAttribute("src",f.#b)},!1),s.addEventListener("load",()=>{s.style.backgroundImage=""},!1),s.setAttribute("src",r),i.removeAttribute("data-template"),this.#E.appendChild(i),i}#Y(t){return t[this.#n]}#q(){t.debug(`${f.#x} - #attachEvents - this.#offset:`,this.#w),f.#C?this.#G():(this.#$(),this.#_(),this.#tt())}#$(){this.#E.addEventListener("click",t=>this.#et(t.target),!1)}#et(e){let i=e.parentElement.parentElement;i.classList.contains(this.#B)&&i.classList.contains(this.#z)&&(t.debug(`${f.#x} - #detectZoom - "zoom" event detected, dispatching event`),this.#j.zoom.send(this.#it(i,e)))}#G(){t.log(`${f.#x} - #attachTouchEvents`);let e=this.#E;e.addEventListener("touchstart",(...t)=>this.#st(...t),!1),e.addEventListener("touchmove",(...t)=>this.#rt(...t),!1),e.addEventListener("touchend",(...t)=>this.#at(...t),!1)}#st(e){let i=e.targetTouches[0];this.#S=i.pageX,this.#I=Date.now(),this.#T=i.target,t.debug(`${f.#x} - #onTouchStart - this.#startX:`,this.#S)}#rt(e){let i=e.targetTouches[0].pageX,s=this.#v=i-this.#S;e.preventDefault();const r=()=>{this.#S=i,this.#v=s=0};t.debug(`${f.#x} - #onTouchMove - this.#deltaX:`,s),s>70&&(r(),this.#nt()),s<-70&&(r(),this.#ot())}#at(t){let e=Date.now()-this.#I,i=this.#T;this.#I=Number.NEGATIVE_INFINITY,this.#T=void 0,this.#v=0,i===t.changedTouches[0].target&&e<=100&&this.#et(i)}#nt(){let e=this.#w;if(e){let t=this.#Q,i=t[e+7-1];i.classList.remove(this.#L,this.#k,this.#z,this.#P),i.removeAttribute(this.#y),this.#w=--e,t[e].classList.add(this.#L),this.#ht();const s=this.#R,r=s.querySelector(`.${this.#o}-image`);return this.#j.previous.send(this.#it(s,r)),!0}t.debug(`${f.#x} - #goToPreviousFrame - this.#offset:`,e)}#ht(){let t=!1,e=!1;this.#J.forEach((i,s)=>{const r=this.#J[s+1];i.setAttribute(this.#y,s),i.classList.toggle(this.#k,!t&&(t=!i.hasAttribute("data-ghost-frame"))),i.classList.toggle(this.#z,3===s),i.classList.toggle(this.#P,!e&&s>=3&&(e=!r||r.hasAttribute("data-ghost-frame")))})}#ot(){let e=this.#U,i=this.#M;if(this.#V||e&&i&&!i.hasAttribute("data-ghost-frame")){let t=this.#w,i=this.#Q[t];i.classList.remove(this.#L,this.#k,this.#z,this.#P),i.removeAttribute(this.#y),e?(e.classList.add(this.#L),this.#w=++t,this.#lt()):this.#dt(),this.#ht();const s=this.#R,r=s.querySelector(`.${this.#o}-image`);return this.#j.next.send(this.#it(s,r)),!0}t.debug(`${f.#x} - #goToNextFrame - this.#offset:`,this.#w)}#it(t,e){return{id:e.getAttribute("data-id"),frame:t,frameIndex:this.#w+3,imageIndex:this.#w,target:e,url:e.getAttribute("data-zoom-url")}}#lt(){this.#O&&this.#N&&this.loadNextPage()}#dt(){let t=this.#V;t&&(this.#w++,this.#K(t),this.#lt())}#_(){this.#ft(t=>t<3,(...t)=>this.#nt(...t))}#tt(){this.#ft(t=>t>3,(...t)=>this.#ot(...t))}#ft(t,e){this.#E.addEventListener("click",i=>{let s=i.target.parentElement.parentElement;if(s.classList.contains(this.#B)){const i=parseInt(s.getAttribute(this.#y),10);t(i)&&e()}},!1)}loadNextPage(){this.#F.nextPage().then(e=>{let i=this.#A,s=i.length,r=!s;if(i.push(...e.map(e=>{let i={id:e.id,title:e.title,small:e.url_t,medium:e.url_s,large:h(e),zoom:l(e),description:d(e)},r=this.#K(i);return s++<4&&(t.debug(`${f.#x} - loadNextPage - imagesCount: ${s}`),r.classList.add(this.#L)),i})),r&&(this.#ht(),this.#j.init.send()),e.length&&this.#j.load.send(),e.length<7)for(let t=3;t--;)this.#Z()})}init(){if(this.#D)t.warn(`${f.#x} - init - already initialized`);else{let t;t=new i({containerId:this.#E.id,size:this.#n,"3d":this.#f,prefix:this.#o}),t.insertSheets(),this.#W(),this.#q();for(let t=3;t--;)this.#Z().classList.add(this.#L);this.loadNextPage(),this.#D=!0}}next(){return this.#ot()}previous(){return this.#nt()}}const c=["url_t","url_s","url_m","url_n","url_w","url_z","url_c","url_b","description"];class m{static#x="[flickr-coverflow/FlickrDataSource]";static EMPTY_RESULTS=Object.freeze([]);#ct=1;#mt=!1;#ut;#pt;#gt;#xt;get pageSize(){return this.#xt}constructor({apiKey:t,user:e,pageSize:i}){let s=new a(m.#x).method("constructor");s.checkString({apiKey:t}),s.checkString({user:e}),s.checkNumber({pageSize:i}),this.#ut=t,this.#pt=e,this.#xt=i,this.#gt=`https://www.flickr.com/services/rest/?method=flickr.people.getPublicPhotos&format=json&nojsoncallback=1&extras=${c.join(",")}&api_key=${t}&user_id=${e}&per_page=${2*i}`}async nextPage(){if(this.#mt)return m.EMPTY_RESULTS;const e=await fetch(`${this.#gt}&page=${this.#ct++}`),i=await e.json();return this.#mt=!i.photos.photo.length,t.debug("[FlickrCoverflow.FlickrDataSource] - nextPage -",{loaded:i.photos.photo.length,total:i.photos.total,photo:i.photos.photo}),this.#mt?m.EMPTY_RESULTS:i.photos.photo}}export{f as Coverflow,m as FlickrDataSource,t as Logger,r as Signal,a as Validator};
